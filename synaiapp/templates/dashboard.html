{% extends 'base.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}
{% block content %}
    <div class="container-fluid">
        <div class="row justify-content-center">
            <h1>Dashboard</h1>
        </div>
        <div class="row justify-content-center">
            <p>Hello {{ username }}</p>
        </div>
        <div class="row justify-content-center">
            <p>Here's the summary of all the analysis you permformed.</p>
        </div>
        {% if summarised_dataset == None %}
        <div class="row justify-content-center">
            <p>Oh, it's seem you never used our song analyzer !</p>
        </div>
        {% else %}
        <div class="row justify-content-center">
            <div id="graph" class="col-lg-12" style="height: 350px;"></div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% if summarised_dataset %}
{% block js_dashboardgraph %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts-en.js" integrity="sha256-q4eNahhjrmTWF+LAesQ+rDagZhwcegBpS7qE0UAjJx4=" crossorigin="anonymous"></script>
    <script src="{% static '/js/graph.js' %}"></script>
    <script type="text/javascript">

    let chart = new LinesChart('graph', {{ summarised_dataset |safe }}, 'LinesChart');

    window.onresize = function()
    {
        chart.chart.resize();
    };
   </script>
{% endblock %}
{% endif %}